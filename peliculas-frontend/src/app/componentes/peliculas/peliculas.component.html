<div class="container mx-auto p-4 font-sans">
  <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">Bienvenido a Películas</h1>

  <div class="mb-8 text-center">
    <h2 class="text-2xl font-semibold mb-4 text-gray-700">Lista de Películas</h2>
    <!-- Botón para ir a la página de administración/creación -->
    <button (click)="goToAdmin()"
            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">
      Administrar Películas
    </button>
  </div>

  <!-- Controles de Búsqueda y Ordenamiento -->
  <div class="bg-white p-6 rounded-lg shadow-md mb-8 flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
    <!-- Búsqueda por Título -->
    <div class="w-full md:w-1/3">
      <label for="searchTitle" class="block text-gray-700 text-sm font-bold mb-2">Buscar por Título:</label>
      <input type="text" id="searchTitle" [(ngModel)]="searchText" (input)="aplicarFiltros()"
             class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"
             placeholder="Ej. Interstellar">
    </div>

    <!-- Ordenar por -->
    <div class="w-full md:w-1/3">
      <label for="sortBy" class="block text-gray-700 text-sm font-bold mb-2">Ordenar por:</label>
      <select id="sortBy" [(ngModel)]="sortBy" (change)="aplicarFiltros()"
              class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
        <option value="">Sin Orden</option>
        <option value="titulo">Título</option>
        <option value="puntaje">Puntaje</option>
        <option value="fechaCreacion">Fecha de Creación</option>
      </select>
    </div>

    <!-- Dirección de Ordenamiento -->
    <div class="w-full md:w-1/3">
      <label for="sortDirection" class="block text-gray-700 text-sm font-bold mb-2">Dirección:</label>
      <select id="sortDirection" [(ngModel)]="sortDirection" (change)="aplicarFiltros()"
              class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
        <option value="asc">Ascendente</option>
        <option value="desc">Descendente</option>
      </select>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div *ngFor="let pelicula of peliculas"
         class="bg-white rounded-lg shadow-lg overflow-hidden flex flex-col justify-between border border-gray-200">
      <div class="p-4">
        <img [src]="pelicula.imagen || 'https://placehold.co/150x200/cccccc/000000?text=Sin+Imagen'"
             alt="Cubierta de {{ pelicula.titulo }}"
             class="w-full h-48 object-cover rounded-md mb-4 shadow-sm"
             onerror="this.onerror=null;this.src='https://placehold.co/150x200/cccccc/000000?text=Sin+Imagen';">
        <h3 class="text-xl font-bold text-gray-900 mb-2">{{ pelicula.titulo }}</h3>
        <p class="text-gray-700 text-sm mb-1"><strong>Director:</strong> {{ pelicula.director }}</p>
        <p class="text-gray-700 text-sm mb-1"><strong>Año:</strong> {{ pelicula.anio }}</p>
        <p class="text-gray-700 text-sm mb-1"><strong>Género:</strong> {{ pelicula.genero }}</p>
        <p class="text-gray-600 text-sm mb-2"><strong>Descripción:</strong> {{ pelicula.descripcion || 'No disponible' }}</p>
        <p class="text-gray-800 text-base font-semibold"><strong>Puntaje:</strong> {{ pelicula.puntaje || 'N/A' }}</p>
        <p class="text-gray-500 text-xs"><strong>Estado:</strong> {{ pelicula.estado || 'Desconocido' }}</p>
        <p class="text-gray-500 text-xs"><strong>Creada:</strong> {{ pelicula.fechaCreacion | date:'short' }}</p>
        <p class="text-gray-500 text-xs"><strong>Modificada:</strong> {{ pelicula.fechaModificacion | date:'short' }}</p>
      </div>
      <div class="p-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-2">
        <!-- Botones de acción para el CRUD (visibles en administración) -->
        <!-- Estos botones se usarán en la vista de administración, pero los incluimos aquí para simplificar -->
        <button (click)="editarPelicula(pelicula.id!)"
                class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-1 px-3 rounded-lg text-sm shadow-sm transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-opacity-75">
          Editar
        </button>
        <button (click)="eliminarPelicula(pelicula.id!)"
                class="bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded-lg text-sm shadow-sm transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75">
          Eliminar
        </button>
      </div>
    </div>
  </div>
</div>